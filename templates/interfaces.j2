# {{ ansible_managed }}

source-directory /etc/network/interfaces.d

auto eth0
iface eth0 inet static
	address {{ vm.connection_ip|default(vm['interfaces'][0]['ip'])|ipaddr('address') }}
	network {{ vm.connection_ip|default(vm['interfaces'][0]['ip'])|ipaddr('network') }}
	netmask {{ vm.connection_ip|default(vm['interfaces'][0]['ip'])|ipaddr('netmask') }}
	broadcast {{ vm.connection_ip|default(vm['interfaces'][0]['ip'])|ipaddr('broadcast') }}
{% if vm.nameserver|default(xen_vman_default_nameserver) is defined %}
	dns-nameservers {{ vm.nameserver|default(xen_vman_default_nameserver)|join(' ') }}
{% endif %}
{% if vm.gateway|default(xen_vman_default_gateway) is defined %}
	gateway {{ vm.gateway|default(xen_vman_default_gateway) }}
{% endif %}
